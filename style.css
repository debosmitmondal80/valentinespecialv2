/* --- 1. CORE BACKGROUND --- */
body {
    background-color: #ffe6e6;
    background-image: radial-gradient(1200px circle at 10% 10%, rgba(255, 255, 255, 0.9), rgba(255, 230, 230, 0.7) 45%, rgba(255, 210, 220, 0.85) 100%),
        radial-gradient(900px circle at 90% 0%, rgba(255, 210, 230, 0.65), rgba(255, 230, 230, 0.6) 60%, rgba(255, 230, 230, 0) 100%);
    font-family: 'Arial', sans-serif;
    margin: 0; height: 100vh; overflow: hidden;
    display: flex; justify-content: center; align-items: center;
    touch-action: none; color: #5b1e2c;
}
.aurora {
    position: fixed; inset: -30%; z-index: 1; pointer-events: none; opacity: 0.45;
    background: radial-gradient(45% 45% at 20% 20%, rgba(255, 120, 170, 0.45), transparent 60%),
                radial-gradient(40% 40% at 80% 30%, rgba(255, 210, 255, 0.4), transparent 60%);
    filter: blur(60px); animation: auroraShift 18s ease-in-out infinite alternate;
}
@keyframes auroraShift { 0% { transform: translate3d(-4%,-2%,0); } 100% { transform: translate3d(6%,-4%,0); } }
.hearts { position: absolute; inset: 0; pointer-events: none; z-index: 0; }
.hearts div {
    position: absolute; width: 20px; height: 20px; background: rgba(255, 255, 255, 0.5);
    animation: floatUp 25s linear infinite; bottom: -150px; font-size: 2rem;
}
.hearts div:nth-child(1) { left: 25%; animation-delay: 0s; }
.hearts div:nth-child(2) { left: 10%; animation-delay: 2s; animation-duration: 12s; }
.hearts div:nth-child(3) { left: 70%; animation-delay: 4s; }
.hearts div:nth-child(4) { left: 40%; animation-delay: 0s; animation-duration: 18s; }
@keyframes floatUp { 0% { transform: translateY(0); opacity: 1; } 100% { transform: translateY(-1000px); opacity: 0; } }

/* --- 2. LAYOUT --- */
.container { text-align: center; width: 90%; max-width: 400px; animation: floatBob 8s ease-in-out infinite; }
.screen {
    width: 100%; height: 100%; display: flex; justify-content: center; align-items: center;
    position: absolute; top: 0; left: 0; transition: opacity 0.5s ease; z-index: 2;
}
.screen-in { animation: screenIn 0.7s ease; }
@keyframes screenIn { from { opacity: 0; transform: translateY(6px); } to { opacity: 1; transform: translateY(0); } }
.hidden { display: none !important; opacity: 0; pointer-events: none; }
h1, h2 { color: #d32f2f; text-shadow: 0 4px 12px rgba(255,77,77,0.15); }
img { width: 80%; max-width: 250px; border-radius: 15px; box-shadow: 0 8px 20px rgba(0,0,0,0.15); animation: breathe 4s ease-in-out infinite; }
@keyframes floatBob { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-6px); } }
@keyframes breathe { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.02); } }

/* --- 3. LOGIN BOX --- */
.login-box {
    background: white; padding: 30px; border-radius: 20px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.1); text-align: center;
    width: 80%; max-width: 300px; animation: floatBob 6s ease-in-out infinite;
}
.login-box h2 { color: #d32f2f; margin-bottom: 10px; }
.hint { font-size: 0.9rem; color: #666; margin-bottom: 20px; }
input {
    width: 100%; padding: 12px; margin: 10px 0;
    border: 2px solid #ffcccc; border-radius: 10px;
    box-sizing: border-box; outline: none;
}
input:focus { border-color: #ff4d4d; }
#loginBtn {
    width: 100%; background-color: #ff4d4d; color: white;
    padding: 12px; border: none; border-radius: 10px;
    font-size: 1.1rem; cursor: pointer; margin-top: 10px;
}
.error { color: red; font-size: 0.9rem; margin-top: 10px; min-height: 20px; }

/* --- 4. COMPONENTS --- */
button {
    font-size: 1.2rem; padding: 12px 25px; border: none; border-radius: 50px; cursor: pointer; font-weight: bold;
    background-color: #ff4d4d; color: white; box-shadow: 0 6px 14px rgba(255, 77, 77, 0.2); transition: 0.2s;
}
button:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(255, 77, 77, 0.3); }
#noBtn, #permissionNo { background-color: white; color: #ff4d4d; border: 2px solid #ff4d4d; }
.btn-group { width: 100%; display: flex; justify-content: center; align-items: center; gap: 20px; margin-top: 20px; }

/* --- 5. MEMORY CARDS --- */
.memory-grid { display: flex; flex-wrap: wrap; width: 310px; margin: 0 auto; perspective: 1000px; gap: 10px; justify-content: center; }
.card { width: 65px; height: 85px; position: relative; transform-style: preserve-3d; transition: transform 0.6s; cursor: pointer; }
.card.flip { transform: rotateY(180deg); }
.front-face, .back-face { width: 100%; height: 100%; position: absolute; border-radius: 12px; display: flex; justify-content: center; align-items: center; font-size: 1.8rem; backface-visibility: hidden; box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
.front-face { background: white; transform: rotateY(180deg); border: 2px solid #ff4d4d; }
.back-face { background: linear-gradient(135deg, #ff4d4d, #ff1a1a); color: white; }

/* --- 6. GAMES & QUIZ --- */
#game-area { width: 100%; height: 260px; background: rgba(255,255,255,0.4); border-radius: 15px; border: 2px solid rgba(255,77,77,0.3); position: relative; overflow: hidden; }
.falling-heart { position: absolute; font-size: 2rem; background: none; border: none; cursor: pointer; animation: heartFall linear forwards; }
@keyframes heartFall { to { transform: translateY(300px); } }
.quiz-btn { background: white; border: 2px solid #ff4d4d; color: #d32f2f; border-radius: 15px; padding: 12px; width: 100%; margin-bottom: 10px; font-weight: bold; }
.progress-track { height: 8px; background: #ffd8e0; border-radius: 10px; overflow: hidden; margin: 15px 0; }
#progress-bar { height: 100%; width: 0; background: #ff4d4d; transition: 0.3s; }

/* --- 7. ENDING & UTILS --- */
.hidden-message { display: none; margin-top: 25px; background: rgba(255,255,255,0.95); padding: 25px; border-radius: 20px; border: 2px solid #ff4d4d; animation: popInMessage 0.8s; }
@keyframes popInMessage { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
.love-note { font-family: 'Courier New', monospace; font-size: 1.05rem; line-height: 1.6; color: #333; }
#toast { visibility: hidden; background: #333; color: white; padding: 12px 25px; border-radius: 30px; position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%); z-index: 3000; opacity: 0; transition: 0.3s; }
#toast.show { visibility: visible; opacity: 1; bottom: 50px; }

/* --- 8. RESTORED LOADING ANIMATION --- */
.suspense {
    position: fixed; inset: 0; display: flex; align-items: center; justify-content: center;
    background: radial-gradient(60% 60% at 50% 30%, rgba(255, 120, 170, 0.35), rgba(10, 0, 8, 0.85));
    backdrop-filter: blur(6px); opacity: 0; pointer-events: none; transition: opacity 0.45s ease; z-index: 2000;
}
.suspense.is-visible { opacity: 1; pointer-events: all; }
.suspense-card {
    position: relative; padding: 30px; border-radius: 24px;
    background: rgba(255, 255, 255, 0.12); border: 1px solid rgba(255, 255, 255, 0.28);
    box-shadow: 0 25px 60px rgba(0,0,0,0.35); backdrop-filter: blur(10px);
}
.heart-loader { position: relative; width: 90px; height: 90px; margin: 0 auto 15px; }
.heart-shape {
    width: 90px; height: 90px; background-color: #ff4d4d; transform: rotate(45deg);
    animation: heartbeat 1.2s infinite; position: relative;
    box-shadow: 0 0 40px rgba(255, 77, 77, 0.8);
}
.heart-shape::before, .heart-shape::after { content: ""; width: 90px; height: 90px; background-color: #ff4d4d; border-radius: 50%; position: absolute; }
.heart-shape::before { top: -45px; left: 0; } .heart-shape::after { top: 0; left: -45px; }
@keyframes heartbeat { 0% { transform: rotate(45deg) scale(1); } 15% { transform: rotate(45deg) scale(1.25); } 30% { transform: rotate(45deg) scale(1); } 45% { transform: rotate(45deg) scale(1.25); } 100% { transform: rotate(45deg) scale(1); } }
.suspense-text { font-size: 1.2rem; color: #ffeef2; font-weight: 700; text-align: center; }
.pulse-ring {
    position: absolute; width: 180px; height: 180px;
    border: 2px solid rgba(255, 255, 255, 0.35); border-radius: 50%;
    top: 50%; left: 50%; transform: translate(-50%, -50%);
    animation: ringPulse 2.8s ease-out infinite; pointer-events: none;
}
@keyframes ringPulse { 0% { transform: translate(-50%, -50%) scale(0.7); opacity: 0.9; } 100% { transform: translate(-50%, -50%) scale(1.3); opacity: 0; } }

/* --- 9. NEON SCREEN --- */
#neon-screen { background-color: #050505; z-index: 1000; overflow: hidden; }
#canvas-container { position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; z-index: 1; }
.center-wrapper { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 300px; height: 300px; display: flex; justify-content: center; align-items: center; pointer-events: none; z-index: 20; }
.neon-heart-svg { position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: visible; z-index: 10; }
.heart-path {
    fill: none; stroke: #ff0054; stroke-width: 3; stroke-linecap: round;
    filter: drop-shadow(0 0 5px #ff0054) drop-shadow(0 0 10px #ff0054) drop-shadow(0 0 20px #ff0054);
    stroke-dasharray: 1000; stroke-dashoffset: 1000; opacity: 0.5;
}
.draw-heart { animation: drawLine 2.5s ease-out forwards; }
@keyframes drawLine { to { stroke-dashoffset: 0; opacity: 1; } }

.name-text { position: relative; z-index: 20; color: #444; font-size: 3.5rem; white-space: nowrap; margin-top: -20px; font-family: 'Pacifico', cursive; }
.neon-char { display: inline-block; opacity: 0.3; }

/* SLOW FLICKER ANIMATION */
.flicker-on { animation: turnOn 2s linear forwards; } 
@keyframes turnOn {
    0% { opacity: 0.1; color: #444; text-shadow: none; }
    10% { opacity: 1; color: #fff; text-shadow: 0 0 10px #ff0054, 0 0 20px #ff0054; }
    30% { opacity: 0.5; color: #fff; text-shadow: 0 0 5px #ff0054; }
    50% { opacity: 0.1; color: #444; text-shadow: none; }
    100% { opacity: 1; color: #fff; text-shadow: 0 0 10px #ff0054, 0 0 30px #ff0054, 0 0 60px #ff0054; }
}

.beating { animation: heartbeatNeon 1.2s infinite cubic-bezier(0.215, 0.61, 0.355, 1) alternate; }
@keyframes heartbeatNeon { from { transform: translate(-50%, -50%) scale(1); } to { transform: translate(-50%, -50%) scale(1.15); } }

/* NEON PARTICLES & RAIN */
/* Important: Added font-family Pacifico here for beautiful text */
.neon-text { 
    position: absolute; top: -50px; color: #fff; white-space: nowrap; 
    z-index: 10; pointer-events: none; font-weight: bold; will-change: transform;
    font-family: 'Pacifico', cursive; 
}
.trail { position: absolute; width: 20px; height: 20px; border-radius: 50%; background: white; pointer-events: none; z-index: 50; box-shadow: 0 0 15px #fff, 0 0 25px #ff0054; transform: translate(-50%, -50%); }
.burst-particle { position: absolute; pointer-events: none; z-index: 60; font-size: 24px; transform: translate(-50%, -50%); }